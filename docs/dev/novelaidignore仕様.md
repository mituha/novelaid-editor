# .novelaidignore 仕様書

`.novelaidignore` は、プロジェクト内の特定のファイルやフォルダを NovelAid Editor の処理（インデックス登録、監視、検索など）から除外するための設定ファイルです。

## 基本仕様

- **配置場所**: プロジェクトのルートディレクトリに配置します。
- **ファイル名**: `.novelaidignore`
- **文字コード**: UTF-8

## 記述ルール

Git の `.gitignore` に準じた、シンプルなパターンマッチングを採用しています。

1. **コメント**: `#` で始まる行はコメントとして無視されます。
2. **フォルダの除外**: 末尾にスラッシュ `/` を付けると、その名前のディレクトリと配下の全ファイルが除外されます。
   - 例: `backups/`
3. **特定のファイルの除外**: ファイル名をそのまま記述します。
   - 例: `notes.tmp`
4. **ワイルドカード**: `*` を使用して、任意の文字列にマッチさせることができます。
   - 例: `*.log`
   - 例: `*` (そのディレクトリ内の全てのファイル・フォルダを除外)
5. **パスの正規化**: 先頭の `./` や `/` は自動的に除去され、プロジェクトルートからの相対パスとして処理されます。
   - 例: `./dist/` → `dist/`

## 影響範囲

`.novelaidignore` に記述されたパターンに一致するパスは、以下の機能で無視されます。

1. **ファイルエクスプローラー**: サイドバーのファイルツリーに表示されません。
2. **メタデータインデックス**:
   - `MetadataService` によるスキャン対象外となります。
   - タグ検索やキャラクター（ペルソナ）の自動検出に含まれません。
3. **ファイル監視 (File Watcher)**:
   - ファイルの追加・変更・削除イベントが、レンダラープロセスやメタデータ更新に通知されません。
4. **プロジェクト検索**:
   - 全文検索などの検索結果から除外されます。

## 実装上の注意 (開発者向け)

- 本機能の真実のソース (Source of Truth) は `src/main/metadataService.ts` の `isIgnored(filePath)` メソッドです。
- `FileWatcher` などの他のモジュールは、このメソッドを使用して判定を行います。
- 循環参照を避けるため、`FileWatcher` は起動時に外部から判定用コールバックを受け取る設計になっています。

### パターンのマッチング処理
現在はシンプルな前方一致、完全一致、および `*` を `.*` に置換した正規表現によるマッチングを行っています。
