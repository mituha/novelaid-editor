# メタデータ仕様

Novelaid Editor では、ファイル（.md, .txt）の先頭に YAML Frontmatter 形式でメタデータを記述し、これを利用してキャラクター管理や設定管理を行います。

## データ形式
YAML Frontmatter 形式を採用しています。

```markdown
---
name: 主人公の名前
tags: character
age: 17
description: ここに説明を記載します。
---
# 本文
ここからソーステキストが始まります。
```

## 予約済みフィールド

現状、エディタの機能に関連付けられているフィールドは以下の通りです。

| フィールド | 型 | 説明 |
| :--- | :--- | :--- |
| `name` | string | 一覧に表示される名称。指定がない場合はファイル名が表示されます。 |
| `tags` | string \| string[] | 収集パネルでのフィルタリングに使用されます。 |

## 収集パネルの動作
「登場人物」や「地名・施設」などのパネルは、`tags` フィールドの内容に基づいてファイルを自動的に収集します。

- **登場人物一覧**: `tags` に `character` 等（登場人物, 人名, 人物, chara）が含まれるファイルを収集します。
- **地名・施設一覧**: `tags` に `location` 等（places, 施設, 場所, geo 等）が含まれるファイルを収集します。
- **プロット・構成案**: `tags` に `plot`, `構成`, `プロット`, `案`, `timeline`, `時間軸`, `年表` 等が含まれるファイルを収集します。

> [!NOTE]
> `tags` は配列形式（ `[tag1, tag2]` ）と文字列形式（ `tag1` ）の両方をサポートしています。

## ライフサイクルと同期
1. **スキャン**: プロジェクト開梱時に全ファイルをスキャンし、メタデータをインデックス化します。
2. **変更監視**: ファイルの保存（書き込み）を検知し、即座にインデックスを更新します。
3. **UI反映**: インデックスが更新されると、レンダラープロセスの収集パネルへ通知が飛び、表示が更新されます。

## 今後の拡張計画
- **カスタムリスト**: ユーザーが任意のタグを指定して新しい収集リストを作成できる機能。
- **複数タグのOR条件**: 1つのリストで複数のタグ（例：`char` と `sub-char`）をまとめて表示する機能。
